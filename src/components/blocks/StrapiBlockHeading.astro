---
import type { StrapiBlockHeading, StrapiBlockTextItem, StrapiBlockTheme } from "../../types";
import { StrapiBlockThemeDefault, getPropertyClass } from "../../lib";
type Props = {
    level: number;
    class?: string;
    data: Array<StrapiBlockTextItem>;
    theme: StrapiBlockTheme;
};

const { data, level = 2, class: classes = '', theme = StrapiBlockThemeDefault } = Astro.props;

const sanitizedData = data.filter(({ text }: StrapiBlockTextItem) => text);
const headingTag = `h${level}` as keyof StrapiBlockTheme['heading'];
const Tag = headingTag;

const blockClasses = classes ? classes.split(' ') : [];
const headingClasses = [...blockClasses, ...getPropertyClass(theme, ['heading', headingTag])];

---

{
    sanitizedData.length && (
        <>
            {sanitizedData.map(({ text }: StrapiBlockTextItem) => {
                return (<Tag class={headingClasses.join(' ')}>{text}</Tag>);
            })}
        </>
    )
}
